"use strict";(self.webpackChunkmjazuly=self.webpackChunkmjazuly||[]).push([[629],{6075:(e,a,i)=>{i.r(a),i.d(a,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>t,metadata:()=>n,toc:()=>d});var n=i(6258),r=i(4848),s=i(8453);const t={slug:"blog/migrasi-vdi-proxmox",title:"Migrasi VDI VBOX ke Proxmox",sidebar_label:"Migrasi VDI VBOX ke Proxmox",authors:"jazuly",tags:["catatan","proxmox","virtualbox"],image:"https://cdn-images-1.medium.com/max/800/1*3VWSPbmWIhihPuKrJBJpbg.png",last_update:{date:"10/4/2023"},description:"Tutorial migrasi image virtualbox vdi ke image proxmox untuk virtualisasi",keywords:["proxmox","qemu","virtualisasi","virtualbox","vdi","image","migrasi","konversi","convert","server"],draft:!1},o="Migrasi VDI VBox ke Proxmox",l={authorsImageUrls:[void 0]},d=[{value:"Step by step!",id:"step-by-step",level:2},{value:"ERROR SSH -&gt; WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!",id:"error-ssh---warning-remote-host-identification-has-changed",level:3},{value:"Solusi REMOTE HOST IDENTIFICATION HAS CHANGED",id:"solusi-remote-host-identification-has-changed",level:4},{value:"Convert .qcow2 ke VMDK",id:"convert-qcow2-ke-vmdk",level:2},{value:"Copy ke usb",id:"copy-ke-usb",level:2},{value:"Buka di Virtualbox",id:"buka-di-virtualbox",level:2}];function m(e){const a={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.p,{children:(0,r.jsx)(a.img,{src:"https://cdn-images-1.medium.com/max/800/1*3VWSPbmWIhihPuKrJBJpbg.png#center",alt:"Migrasi VDI Virtualbox ke Proxmox"})}),"\n",(0,r.jsx)(a.h2,{id:"step-by-step",children:"Step by step!"}),"\n",(0,r.jsxs)(a.ol,{children:["\n",(0,r.jsxs)(a.li,{children:["Temukan file .vdi VM Anda - Pertama, kita perlu mencari file hard disk VirtualBox (.vdi).","\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Buka GUI VirtualBox"}),"\n",(0,r.jsx)(a.li,{children:"Klik pada VM yang ingin kita migrasikan dan klik tombol Settings"}),"\n",(0,r.jsx)(a.li,{children:"Klik Storage dan klik file .vdi yang terdaftar di bawah IDE Controller"}),"\n",(0,r.jsx)(a.li,{children:"Mouse over the Hard Disk: kotak daftar dropdown dan catat path ke file .vdi"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(a.ol,{start:"2",children:["\n",(0,r.jsxs)(a.li,{children:["Mengkonversi .vdi ke .img - Selanjutnya kita perlu mengkonversikan hard drive ke format RAW untuk ProxMox.","\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Pada host VirtualBox (C:\\Program Files\\Oracle\\VirtualBox) buka command prompt, jalankan :"}),"\n"]}),"\n",(0,r.jsxs)(a.blockquote,{children:["\n",(0,r.jsx)(a.p,{children:(0,r.jsx)(a.em,{children:"VBoxManage clonehd --format RAW [virtual_harddisk] .vdi [virtual_harddisk] .img"})}),"\n",(0,r.jsxs)(a.p,{children:["contoh :\r\n",(0,r.jsx)(a.em,{children:'>VBoxManage clonehd --format RAW "D:\\KERJA\\VIRTUALISASI\\OS Mentah\\Ubuntu 18.04.4-Server MJ1\\Ubuntu 18.04.4-Server MJ1.vdi" "D:\\KERJA\\VIRTUALISASI\\OS Mentah\\Ubuntu 18.04.4-Server MJ1\\Ubuntu 18.04.4-Server MJ1.img"'})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(a.li,{children:["Membuat VM Kosong di poxmox.","\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Buka proxmox web"}),"\n",(0,r.jsx)(a.li,{children:"Create VM"}),"\n",(0,r.jsx)(a.li,{children:"Set semua default di VM"}),"\n",(0,r.jsx)(a.li,{children:"Misalnya VMID : 101"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(a.li,{children:["Upload .img file","\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:["Tes koneksi, Bisa menggunakan ssh -> buka cmd -> ketik ",(0,r.jsx)(a.code,{children:"ssh root@ip-proxmox"})," (jika terdapat error -> [[#ERROR SSH - WARNING REMOTE HOST IDENTIFICATION HAS CHANGED]])"]}),"\n",(0,r.jsx)(a.li,{children:"buat mkdir -p /var/lib/vz/images/998"}),"\n",(0,r.jsx)(a.li,{children:"kembali ke mesin virtualbox"}),"\n",(0,r.jsx)(a.li,{children:"mv *.img menjadi vm-101-disk-1.raw (misalnya utk VMID: 101)"}),"\n",(0,r.jsx)(a.li,{children:"upload dengan perintah :"}),"\n"]}),"\n",(0,r.jsxs)(a.blockquote,{children:["\n",(0,r.jsx)(a.p,{children:'scp file.img username@ip-proxmox:/var/lib/vz/images/"VMID"'}),"\n",(0,r.jsx)(a.p,{children:'contoh :\r\n>C:\\Users\\Win-User>scp "D:\\KERJA\\VIRTUALISASI\\OS Mentah\\Ubuntu 18.04.4-Server MJ1\\Ubuntu18.04.4-Server.raw" root@192.168.11.110:/var/lib/vz/images/101'}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(a.li,{children:"Ubah configurasi 101.conf pada -> /etc/pve/nodes/proxmox1/qemu-server\r\nSemula :"}),"\n"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{children:"boot: order=scsi0;ide2;net0\r\ncores: 1\r\nide2: none,media=cdrom\r\nmemory: 2048\r\nname: UbuntuServer18.04Vbox\r\nnet0: virtio=DA:FA:A9:16:E4:63,bridge=vmbr0,firewall=1\r\nnuma: 0\r\nostype: l26\r\nscsi0: local-lvm:vm-101-disk-0,size=20G\r\nscsihw: virtio-scsi-pci\r\nsmbios1: uuid=a3d94e54-cec5-4925-95e9-ecaa0c9c07d0\r\nsockets: 1\r\nvmgenid: 85626e3f-fdc3-4e51-8dd5-34bdcc9e9751\n"})}),"\n",(0,r.jsx)(a.p,{children:"Menjadi :"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{children:"boot: order=scsi0;ide2;net0\r\ncores: 1\r\nide2: none,media=cdrom\r\nmemory: 2048\r\nname: UbuntuServer18.04Vbox\r\nnet0: virtio=DA:FA:A9:16:E4:63,bridge=vmbr0,firewall=1\r\nnuma: 0\r\nostype: l26\r\nscsi0: local:101/Ubuntu1804-Server.raw,format=raw,cache=writeback,size=20G\r\nscsihw: virtio-scsi-pci\r\nsmbios1: uuid=a3d94e54-cec5-4925-95e9-ecaa0c9c07d0\r\nsockets: 1\r\nvmgenid: 85626e3f-fdc3-4e51-8dd5-34bdcc9e9751\n"})}),"\n",(0,r.jsxs)(a.ol,{start:"6",children:["\n",(0,r.jsx)(a.li,{children:"Boot it!"}),"\n"]}),"\n",(0,r.jsx)(a.h3,{id:"error-ssh---warning-remote-host-identification-has-changed",children:"ERROR SSH -> WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!"}),"\n",(0,r.jsxs)(a.p,{children:["#referensi -> ",(0,r.jsx)(a.a,{href:"https://jaranguda.com/cara-mengatasi-ssh-error-remote-host-identification-has-changed/",children:"jaranguda.com"})]}),"\n",(0,r.jsx)(a.p,{children:"kalo tidak di atasi, kita tidak akan bisa login ke server tersebut. Ada beberapa kemungkinan kenapa muncul peringatan tersebut, sebelumnya akan saya jelaskan secara singkat cara SSH client konek SSH server."}),"\n",(0,r.jsxs)(a.p,{children:["ketika kita menjalankan ",(0,r.jsx)(a.code,{children:"ssh root@IP-SERVER"}),", client akan menanyakan server key yang dimiliki, lalu disimpan di file ",(0,r.jsx)(a.code,{children:"~/.ssh/known_hosts"}),", jadi tiap terhubung ke server yang sama tidak akan ditanyakan apakah key server tersebut dipercaya atau ngga selama key nya sama. Masalah yang terjadi disini adalah anda terhubung ke IP server yang sudah pernah anda simpan, tetapi terdapat perubahan key/fingerprint dari SSH Server yang bisa terjadi karena install ulang, Key nya diubah oleh admin. Hal ini akan sering terjadi bila anda sering testing banyak server di cloud yang sering memberikan IP yang sama sewaktu reinstall."]}),"\n",(0,r.jsx)(a.h4,{id:"solusi-remote-host-identification-has-changed",children:"Solusi REMOTE HOST IDENTIFICATION HAS CHANGED"}),"\n",(0,r.jsxs)(a.p,{children:['Pertama check baris ke "160" dari file ',(0,r.jsx)(a.code,{children:".ssh/known_hosts"})," seperti yang muncul di error diatas.\r\nIntinya -> hapus key pada baris yang ditampilkan error. Kemudian login ulang."]}),"\n",(0,r.jsx)(a.h1,{id:"migrasi-proxmox--ke-virtualbox",children:(0,r.jsx)(a.strong,{children:"MIGRASI PROXMOX  KE VIRTUALBOX"})}),"\n",(0,r.jsx)(a.h2,{id:"convert-qcow2-ke-vmdk",children:"Convert .qcow2 ke VMDK"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"$ sudo qemu-img convert -p -f qcow2 -O vmdk /var/lib/vz/images/106/vm-106-disk-0.qcow2 /var/lib/vz/images/106/vm-106-disk-0.vmdk\n"})}),"\n",(0,r.jsx)(a.h2,{id:"copy-ke-usb",children:"Copy ke usb"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"$ sudo mkdir /media/external #buat direktory baru\r\n$ sudo fdisk -l #lihat lokasi drive usb\r\n$ sudo mount -t vfat /dev/sdb1 /media/external -o uid=1000,gid=1000,utf8,dmask=027,fmask=137 #mount usb\r\n$ sudo rsync --progress /var/lib/vz/images/106/vm-106-disk-0.vmdk /media/external/vm-106-disk-0.vmdk #copy ke usb\n"})}),"\n",(0,r.jsx)(a.h2,{id:"buka-di-virtualbox",children:"Buka di Virtualbox"}),"\n",(0,r.jsxs)(a.p,{children:["Buat virtual baru, pada pilihan storage, pilih ",(0,r.jsx)(a.code,{children:"file.vmdk"})," yang telah di copy tadi. DONE."]}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)(a.p,{children:"Referensi:"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:(0,r.jsx)(a.a,{href:"https://lms.onnocenter.or.id/wiki/index.php/Proxmox:_Migrasi_VDI_VirtualBox_ke_Proxmox",children:"lms.onnocenter.or.id"})}),"\n",(0,r.jsx)(a.li,{children:(0,r.jsx)(a.a,{href:"https://www.mampirklik.com/2017/11/tip-cara-migrasi-virtualbox-vdi-ke.html",children:"mampirklik.com"})}),"\n"]}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)("center",{children:(0,r.jsx)(a.em,{children:"Jika informasi ini bermanfaat bagi Anda"})}),"\n",(0,r.jsxs)("center",{children:[(0,r.jsx)(a.em,{children:"saya sangat mengapresiasi jika ditraktir kopi"})," \u2615"]}),"\n",(0,r.jsx)("center",{children:"\ud83d\udd3b"}),"\n",(0,r.jsx)(a.p,{children:(0,r.jsx)(a.a,{href:"https://saweria.co/mjazuly",children:(0,r.jsx)(a.img,{src:"https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png#bmc",alt:"buy me a coffee"})})})]})}function c(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},6258:e=>{e.exports=JSON.parse('{"permalink":"/blog/migrasi-vdi-proxmox","source":"@site/blog/2023/10-04-migrasi-vbox-proxmox.md","title":"Migrasi VDI VBOX ke Proxmox","description":"Tutorial migrasi image virtualbox vdi ke image proxmox untuk virtualisasi","date":"2023-10-04T00:00:00.000Z","tags":[{"inline":false,"label":"catatan","permalink":"/tags/catatan","description":"Semua catatan untuk blog"},{"inline":false,"label":"Proxmox","permalink":"/tags/proxmox","description":"Proxmox adalah platform virtualisasi open source yang kuat, mencakup Proxmox VE (Virtual Environment) untuk virtualisasi server (KVM untuk VM dan LXC untuk kontainer) dan Proxmox Backup Server untuk backup. Ini sering digunakan untuk membangun dan mengelola infrastruktur server yang efisien dan hemat biaya."},{"inline":false,"label":"virtualbox","permalink":"/tags/virtualbox","description":"VirtualBox adalah perangkat lunak virtualisasi gratis dan sumber terbuka yang memungkinkan Anda untuk menjalankan beberapa sistem operasi (OS) secara bersamaan di satu komputer fisik. Ini menciptakan \\"mesin virtual\\" (VM) yang bertindak seperti komputer terpisah, sangat berguna untuk pengujian, pengembangan, atau menjalankan OS yang berbeda."}],"readingTime":3.68,"hasTruncateMarker":true,"authors":[{"name":"Mochamad Jazuly","title":"Cybersecurity Analyst","url":"https://github.com/coffee-90","page":{"permalink":"/authors/blogger"},"socials":{"x":"https://x.com/emjazuly","github":"https://github.com/coffee-90","linkedin":"https://www.linkedin.com/in/mjazuly/","threads":"https://www.threads.net/@em_jazuly","instagram":"https://www.instagram.com/em_jazuly"},"imageURL":"https://github.com/coffee-90.png","key":"jazuly"}],"frontMatter":{"slug":"blog/migrasi-vdi-proxmox","title":"Migrasi VDI VBOX ke Proxmox","sidebar_label":"Migrasi VDI VBOX ke Proxmox","authors":"jazuly","tags":["catatan","proxmox","virtualbox"],"image":"https://cdn-images-1.medium.com/max/800/1*3VWSPbmWIhihPuKrJBJpbg.png","last_update":{"date":"10/4/2023"},"description":"Tutorial migrasi image virtualbox vdi ke image proxmox untuk virtualisasi","keywords":["proxmox","qemu","virtualisasi","virtualbox","vdi","image","migrasi","konversi","convert","server"],"draft":false},"unlisted":false,"lastUpdatedAt":1696352400000,"prevItem":{"title":"Persiapan Pembentukan CSIRT dan Pengenalan CSM (Cyber Security Maturity) Kabupaten & Kota se-Provinsi Kalimantan Timur, 2024","permalink":"/blog/persiapan-csirt-csm-provinsi-kalimantan-timur-2024"},"nextItem":{"title":"Sosialisasi Security Awareness - Pengamanan Perangkat Mobile dari Phishing, Depok, 2023","permalink":"/blog/sosialisasi-kesadaran-keamanan-informasi-pengamanan-mobile-depok-2023"}}')},8453:(e,a,i)=>{i.d(a,{R:()=>t,x:()=>o});var n=i(6540);const r={},s=n.createContext(r);function t(e){const a=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),n.createElement(s.Provider,{value:a},e.children)}}}]);